SET (CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake")

FIND_PACKAGE (QJSON REQUIRED)

INCLUDE_DIRECTORIES (${ONLINEBOOKMARKS_INCLUDE_DIR}
	${CMAKE_CURRENT_BINARY_DIR}
	${CMAKE_CURRENT_SOURCE_DIR}
	${QJSON_INCLUDE_DIR}
	)

SET (READITLATER_SRCS
	readitlater.cpp
	readitlaterservice.cpp
	readitlaterauthwidget.cpp
	readitlateraccount.cpp
	readitlaterapi.cpp
	)

SET (READITLATER_HEADERS
	readitlater.h
	readitlaterservice.h
	readitlaterauthwidget.h
	readitlateraccount.h
	readitlaterapi.h
	)

SET (READITLATER_FORMS readitlaterauthwidget.ui)

SET (READITLATER_RESOURCES onlinebookmarksreaditlater.qrc)
CreateTrVars ("poshuku_onlinebookmarks_readitlater" "en;ru_RU;uk_UA" ONLINEBOOKMARKS_READITLATER_TRANSLATIONS ONLINEBOOKMARKS_READITLATER_COMPILED_TRANSLATIONS)

IF (NOT LC_NO_MOC)
	QT4_WRAP_CPP (READITLATER_MOC_SRCS ${READITLATER_HEADERS})
ENDIF (NOT LC_NO_MOC)
QT4_WRAP_UI (READITLATER_UIS_H ${READITLATER_FORMS})
QT4_ADD_RESOURCES (READITLATER_RCCS ${READITLATER_RESOURCES})

ADD_CUSTOM_COMMAND (OUTPUT
	${ONLINEBOOKMARKS_READITLATER_COMPILED_TRANSLATIONS}
	COMMAND "${QT_LRELEASE_EXECUTABLE}" ${ONLINEBOOKMARKS_READITLATER_TRANSLATIONS}
	DEPENDS ${ONLINEBOOKMARKS_READITLATER_TRANSLATIONS}
	WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
	)
ADD_LIBRARY (leechcraft_poshuku_onlinebookmarks_readitlater SHARED
 	${ONLINEBOOKMARKS_READITLATER_COMPILED_TRANSLATIONS}
	${READITLATER_SRCS}
	${READITLATER_MOC_SRCS}
	${READITLATER_UIS_H}
	${READITLATER_RCCS}
	)

TARGET_LINK_LIBRARIES (leechcraft_poshuku_onlinebookmarks_readitlater
	${QT_LIBRARIES}
	${LEECHCRAFT_LIBRARIES}
	${QJSON_LIBRARIES}
	)

INSTALL (TARGETS leechcraft_poshuku_onlinebookmarks_readitlater DESTINATION ${LC_PLUGINS_DEST})
INSTALL (FILES ${ONLINEBOOKMARKS_READITLATER_COMPILED_TRANSLATIONS} DESTINATION ${LC_TRANSLATIONS_DEST})
